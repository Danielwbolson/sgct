# Copyright Linkoping University 2011
# SGCT Project Authors see Authors.txt

cmake_minimum_required(VERSION 2.8 FATAL_ERROR)
project(SGCT_Examples)

option(SGCT_EXAMPLES_AL "Build OpenAL examples" OFF)
option(SGCT_EXAMPLES_FMOD "Build FMOD examples" OFF)
option(SGCT_EXAMPLES_FFMPEG "Build FFmpeg examples" OFF)
option(SGCT_EXAMPLES_IMGUI "Build imgui examples" OFF)
option(SGCT_EXAMPLES_OPENVR "Build OpenVR examples" OFF)
option(SGCT_EXAMPLES_OSG "Build OSG examples" OFF)
option(SGCT_EXAMPLES_WEBSOCKETS "Build Websockets examples" OFF)
#Spout doesn't support MinGW
if(MSVC)
	option(SGCT_EXAMPLES_SPOUT "Build Spout examples" OFF)
endif()

if( APPLE )
	option(SGCT_CPP11 "Use libc++ instead of libstdc++" ON)
	set(CMAKE_OSX_ARCHITECTURES "x86_64")
	if(CMAKE_GENERATOR STREQUAL Xcode)
		set(CMAKE_OSX_DEPLOYMENT_TARGET "10.9")
	endif()
endif()

#force sgct to build
link_libraries(${LIB_NAME})

ADD_SUBDIRECTORY(calibrator)
ADD_SUBDIRECTORY(clustertest)
ADD_SUBDIRECTORY(dataTransfer_opengl3)
ADD_SUBDIRECTORY(domeImageViewer_opengl3)
ADD_SUBDIRECTORY(depthBuffer)
ADD_SUBDIRECTORY(example1)
ADD_SUBDIRECTORY(example1_opengl3)
ADD_SUBDIRECTORY(gamepadExample)
ADD_SUBDIRECTORY(heightMappingExample)
ADD_SUBDIRECTORY(heightMappingExample_opengl3)
if(SGCT_EXAMPLES_IMGUI)
	ADD_SUBDIRECTORY(imguiExample)
endif()
ADD_SUBDIRECTORY(kinectExample)
ADD_SUBDIRECTORY(MRTExample)
ADD_SUBDIRECTORY(MRTExample_opengl3)
ADD_SUBDIRECTORY(model_loader)
ADD_SUBDIRECTORY(model_loader_opengl3)
if(SGCT_EXAMPLES_OPENVR)
ADD_SUBDIRECTORY(openvrExample)
endif()
if(SGCT_EXAMPLES_OSG)
	ADD_SUBDIRECTORY(osgExample)
	ADD_SUBDIRECTORY(osgExampleRTT)
endif()
ADD_SUBDIRECTORY(postFXExample)
ADD_SUBDIRECTORY(postFXExample_opengl3)
ADD_SUBDIRECTORY(renderToTexture)
ADD_SUBDIRECTORY(sgct_template)
ADD_SUBDIRECTORY(SGCTRemote)
ADD_SUBDIRECTORY(simpleNavigationExample)
ADD_SUBDIRECTORY(simpleNavigationExample_opengl3)
ADD_SUBDIRECTORY(simpleShaderExample)
ADD_SUBDIRECTORY(simpleShaderExample_opengl3)
if(SGCT_EXAMPLES_AL)
	ADD_SUBDIRECTORY(soundExample)
endif()
ADD_SUBDIRECTORY(textureExample)
ADD_SUBDIRECTORY(textureExample_opengl3)
ADD_SUBDIRECTORY(OmniStereoTest_opengl3)
ADD_SUBDIRECTORY(trackingExample)
if(SGCT_EXAMPLES_FMOD)
	ADD_SUBDIRECTORY(fmodExample_opengl3)
endif()
ADD_SUBDIRECTORY(networkExample_opengl3)

if(SGCT_EXAMPLES_SPOUT)
	SET(SPOUT_ENABLED "1" PARENT_SCOPE)
	ADD_SUBDIRECTORY(SpoutExample)
	ADD_SUBDIRECTORY(SpoutSenderExample)
endif()

if(SGCT_EXAMPLES_FFMPEG)
	ADD_SUBDIRECTORY(FFmpegCaptureAndDomeImageViewer)
	ADD_SUBDIRECTORY(FFmpegCaptureExample)
endif()

if(SGCT_EXAMPLES_WEBSOCKETS)
	SET(WEBSOCKETS_ENABLED "1" PARENT_SCOPE)
	ADD_SUBDIRECTORY(websocketsExample)
endif()

if( WIN32 )
	add_definitions(-D__WIN32__)
	if( MINGW )
		set(CMAKE_CXX_FLAGS "-std=c++11 ${CMAKE_CXX_FLAGS}")
	endif()
elseif( APPLE  )
	add_definitions(-D__APPLE__)
	if(SGCT_CPP11)
		set(CMAKE_CXX_FLAGS "-std=c++11 -stdlib=libc++ ${CMAKE_CXX_FLAGS}")
	else()
		set(CMAKE_CXX_FLAGS "-std=c++0x -stdlib=libstdc++ ${CMAKE_CXX_FLAGS}")
	endif()
else()
	add_definitions(-D__LINUX__)
	set(CMAKE_CXX_FLAGS "-std=c++11 ${CMAKE_CXX_FLAGS}")
endif()
	
#if( CMAKE_COMPILER_IS_GNUCXX )
#	set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -static-libgcc -static-libstdc++ -static")
#endif()
